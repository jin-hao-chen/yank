#!/usr/bin/env python
# -*- coding: utf-8 -*-

import os
import sys
from tokentype import *
from parser import Token, Parser
from objects import *


def main(argv=None):
    if len(argv) > 1:
        filename = argv[1]
        parser = Parser(filename)
        while True:
            parser.fetch_next_token()
            if parser.cur_token.type == TOKEN_TYPE_EOF:
                print(parser.cur_token)
                return
            print(parser.cur_token)
    """
    li = ListObj([IntObj(1), FloatObj(2.5), StrObj('Hello')])
    call(li, 'insert(_,_,_)')(li, IntObj(0), FloatObj(100.0))
    m = MapObj({StrObj('name'): StrObj('Chen Jinhao'), StrObj('age'): IntObj(20)})
    call(li, 'append(_,_)')(li, m)
    print(call(li, 'tostr(_)')(li).str)
    call(m, 'put(_,_,_)')(m, StrObj('name'), StrObj('#'))
    print(call(li, 'tostr(_)')(li).str)
    age = call(m, 'get(_,_)')(m, StrObj('age'))
    print(call(age, 'tostr(_)')(age).str)
    """

if __name__ == '__main__':
    argv = sys.argv
    main(argv)

